<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>git-vogue</title>
        <link rel="stylesheet" type="text/css" href="./css/default.css" />
    </head>
    <body>
        <header>
            <div id="navigation">
                <a href="https://www.anchor.com.au">Anchor</a>
                <a href="https://github.com/anchor/git-vogue">Github</a>
            </div>
        </header>

        <section id="content">
            <h1>git-vogue</h1>

            <p><a href="https://travis-ci.org/anchor/git-vogue"><img src="http://travis-ci.org/anchor/git-vogue.png" alt="Travis Status" /></a></p>
<p><em>git-vogue</em> assists developers to keep their Haskell code <a href="https://www.youtube.com/watch?v=GuJQSAiODqI">“in vogue”</a>.</p>
<p>This package defines a list of commands to check code quality, comments, and formatting continually. <em>git-vogue</em> will set up your repository to run all command pairs on commit, giving instant feedback on the quality of code, and helping fix issues more quickly.</p>
<p>Currently, <em>git-vogue</em> will support <a href="http://hackage.haskell.org/package/hlint">hlint</a>, <a href="https://hackage.haskell.org/package/hspec">hspec</a> and <a href="https://hackage.haskell.org/package/stylish-haskell">Stylish Haskell</a>.</p>
<h2 id="installation">Installation</h2>
<p><em>git-vogue</em> can be found on Hackage (link TBA) and can be installed with Cabal.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">cabal</span> install git-vogue</code></pre>
<p>To apply it to your repository, invoke:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">git</span> vogue init</code></pre>
<p>This one time command will setup the git hooks and other requirements to latch itself onto your repository. Once installed, <em>git-vogue</em>’s functionality is seamlessly integrated into your git workflow, making it an intrinsic part of your development cycle.</p>
<h2 id="testing">Testing</h2>
<p>To run the built-in tests, run</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">cabal</span> test</code></pre>
<p>There are two sets of acceptance tests in the tests directory, that test against different sources of packages. To run them, run the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">tests/acceptance-tests</span>
<span class="kw">tests/acceptance-tests-2</span></code></pre>
<h2 id="rationale">Rationale</h2>
<p>At Anchor Engineering, we’ve been working with Haskell for some time, and we’ve encountered some interesting problems along the way. A lot of these problems have to do with <em>code readiness</em>: code that is not only ready to run and deploy, but also ready to pass on to other developers so they can maintain and update it.</p>
<h3 id="formatting">Formatting</h3>
<p>Nobody formats their code quite the same way, making it difficult for developers to pick up each other’s code and read or change it. Differences in spaces verses tabs, or how methods are delimited can cause issues with a lack of standardization.</p>
<p>To make things easier for everyone (including yourself), we’ve set up <em>git-vogue</em> to use <strong>Stylish Haskell</strong> to check if your code conforms to a given format. If it doesn’t, your commit will not be allowed to be pushed upstream, and you will instead receive a number of recommeded changes.</p>
<h2 id="plugin-design">Plugin design</h2>
<p><strong>The interface</strong> for an executable is a single argument, one of:</p>
<ul>
<li>check</li>
<li>fix</li>
<li>name</li>
</ul>
<p>The plugin can assume that the CWD will be set to the top-level directory of the package.</p>
<p>The plugin will receive a list of all files in the current repository that are not to be ignored via STDIN when running in “check” or “fix” mode. These file paths will be absolute and newline separated.</p>
<p><strong>Rules for each plugin</strong></p>
<ul>
<li><code>check</code> shall not modify any files</li>
<li><code>check</code> may have various return values:
<ul>
<li>No errors - return code 0</li>
<li>Errors need fixing - return code 1</li>
<li>Catastrophic failure to check - return code 2</li>
</ul></li>
<li><code>fix</code> is idempotent</li>
<li><code>fix</code> may have various return values:
<ul>
<li>The code is now good (changes may or may not have been made) - return code 0</li>
<li>Some errors remain - return code 1</li>
<li>Catastrophic failure to check - return code 2</li>
</ul></li>
<li>If <code>fix</code> returns “success” (return code 0), <code>check</code> must no longer fail</li>
</ul>
        </section>

        <footer>
            <p class="info">Generated by Hakyll.</p>
        </footer>
    </body>
</html>
